{"version":3,"sources":["components/Search/Search.js","components/TableBody/TableBody.js","components/Loader/Loader.js","components/Hooks/UseServerData.js","components/Paginator/Paginator.js","App.js","index.js"],"names":["Search","onSearchSend","useState","searchValue","setSearchValue","console","log","className","InputGroup","Form","Control","as","defaultValue","onChange","event","field","target","value","param","FormControl","aria-describedby","Append","Button","variant","onClick","TableBody","rows","Table","striped","bordered","results","length","map","row","date","title","count","distance","id","Loader","UseServerData","url","setRows","isLoading","setIsLoading","useEffect","axios","method","then","response","data","Paginator","items","Pagination","App","baseUrl","pageActive","setPageActive","rowsLimit","setRowsLimit","pageCount","setPageCount","setUrl","substring","Math","ceil","pageItems","useMemo","i","push","Item","active","Container","filter","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9c221be9.chunk.js","sourcesContent":["import React, {useState} from \"react\";\nimport {Button, FormControl, InputGroup, Form} from \"react-bootstrap\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconst Search = ({onSearchSend}) => {\n    const [searchValue, setSearchValue] = useState({\n        'field': 'title',\n        'param': 'gte',\n        'value': ''\n    })\n    console.log(searchValue)\n\n    return (\n        <div className=\"Search\">\n            <InputGroup className=\"mb-3\">\n                <Form.Control\n                    as=\"select\"\n                    defaultValue=\"Название\"\n                    onChange={(event) => {\n                        setSearchValue({\n                            field: event.target.value,\n                            param: searchValue.param,\n                            value: searchValue.value\n                        })\n                    }}\n                >\n                    <option value='title'>Название</option>\n                    <option value='count'>Количество</option>\n                    <option value='distance'>Расстояние</option>\n                </Form.Control>\n                <Form.Control\n                    as=\"select\"\n                    defaultValue=\"Больше\"\n                    onChange={(event) => {\n                        setSearchValue({\n                            field: searchValue.param,\n                            param: event.target.value,\n                            value: searchValue.value\n                        })\n                    }}>\n                    <option value='gte'>Больше</option>\n                    <option value='lte'>Меньше</option>\n                    <option value='iexact'>Равно</option>\n                    <option value='icontains'>Содержит</option>\n                </Form.Control>\n                <FormControl\n                    aria-describedby=\"basic-addon2\"\n                    value={searchValue.value}\n                    onChange={(event) => {\n                        setSearchValue({\n                            field: searchValue.field,\n                            param: searchValue.param,\n                            value: event.target.value\n                        })\n                    }}\n                />\n                <InputGroup.Append>\n                    <Button\n                        variant=\"outline-secondary\"\n                        onClick={() => {\n                            onSearchSend(searchValue)\n                        }}\n                    >\n                        Найти\n                    </Button>\n                </InputGroup.Append>\n            </InputGroup>\n        </div>\n    );\n}\n\nexport default Search;\n","import React from \"react\";\nimport {Table} from \"react-bootstrap\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Search from \"../Search/Search\";\n\nconst TableBody = ({rows, onSearchSend}) => {\n\n    return (\n        <div className=\"Table\">\n            <h1>Таблица</h1>\n            <Search onSearchSend={onSearchSend}/>\n            <Table striped bordered variant=\"dark\" className=\"mt-3\">\n                <thead>\n                <tr>\n                    <th>Дата</th>\n                    <th>Название</th>\n                    <th>Количество</th>\n                    <th>Расстояние</th>\n                </tr>\n                </thead>\n                <tbody>\n                {rows.results.length !== 0 ? rows.results.map(row => (\n                    <tr key={row.id}>\n                        <td>{row.date}</td>\n                        <td>{row.title}</td>\n                        <td>{row.count}</td>\n                        <td>{row.distance}</td>\n                    </tr>\n                )) : <h4>Данные не найдены.</h4>}\n                </tbody>\n            </Table>\n        </div>\n    );\n}\n\nexport default TableBody;\n","import React from \"react\";\nimport styles from './loader.css'\n\nconst Loader = () => {\n    return (\n        <div className=\"lds-ripple\">\n            <div></div>\n            <div></div>\n        </div>\n    )\n}\n\nexport default Loader;\n","import {useEffect, useState} from \"react\";\nimport axios from \"axios\";\n\nconst UseServerData = (url) => {\n    const [rows, setRows] = useState([])\n    const [isLoading, setIsLoading] = useState(false)\n\n    useEffect(() => {\n        axios({\n            method: \"GET\",\n            url: url\n        }).then(response => {\n            setRows(response.data)\n            setIsLoading(true)\n        })\n    }, [url])\n\n    return [rows, isLoading]\n}\n\nexport default UseServerData;\n","import React from \"react\";\nimport {Pagination} from \"react-bootstrap\";\n\nconst Paginator = ({items}) => {\n    return (\n        <Pagination className=\"mt-3\">\n            {items}\n        </Pagination>\n    )\n}\n\nexport default Paginator;\n","import React, {useState, useEffect, useMemo, Fragment} from \"react\";\nimport {Container, Pagination} from \"react-bootstrap\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport TableBody from \"./components/TableBody/TableBody\";\nimport Loader from \"./components/Loader/Loader\";\nimport UseServerData from \"./components/Hooks/UseServerData\";\nimport Paginator from \"./components/Paginator/Paginator\";\n\nfunction App() {\n    const baseUrl = 'http://127.0.0.1:8000/api/rows/'\n    const [pageActive, setPageActive] = useState(0)\n    const [rowsLimit, setRowsLimit] = useState(0)\n    const [pageCount, setPageCount] = useState(0)\n    const [url, setUrl] = useState(baseUrl)\n    useEffect(() => {\n        if (url === baseUrl) {\n            setUrl(url + '?offset=' + (pageActive * rowsLimit))\n        } else {\n            setUrl(url.substring(0, url.length - 1) + (pageActive * rowsLimit))\n        }\n    }, [pageActive])\n\n    const [rows, isLoading] = UseServerData(url)\n\n    const onSearchSend = (filter) => {\n        setUrl(baseUrl + '?' + filter.field + '__' + filter.param + '=' + filter.value)\n    }\n\n    console.log(url)\n\n    useEffect(() => {\n        if (isLoading) {\n            setRowsLimit(rows.results.length)\n            setPageCount(Math.ceil(rows.count / rows.results.length))\n        }\n    }, [isLoading])\n\n    const pageItems = useMemo(() => {\n        let pageItems = []\n        for (let i = 0; i < pageCount; i++) {\n            pageItems.push(\n                <Pagination.Item key={i} active={i === pageActive} onClick={() => setPageActive(i)}>\n                    {i + 1}\n                </Pagination.Item>\n            )\n        }\n        return pageItems\n    }, [pageActive, pageCount])\n\n    return (\n        <Container>\n            {isLoading ?\n                <Fragment>\n                    <TableBody rows={rows} onSearchSend={onSearchSend}/>\n                    <Paginator items={pageItems}/>\n                </Fragment>\n                : <Loader/>}\n        </Container>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}